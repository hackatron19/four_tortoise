{"ast":null,"code":"var _jsxFileName = \"/home/aman208/Desktop/Projects/hackathon/Client/src/FoodList/buynowVillage.js\";\nimport React, { Component } from 'react';\nimport moment from \"moment\";\nimport fire from '../firebase';\nimport { Button, Container, Card, Header, Image, Grid, Loader, Icon, Dimmer, Table, Transition, Label, Form, Comment, GridColumn, Divider } from \"semantic-ui-react\";\n\nvar qs = require('querystringify');\n\nclass Welcome extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      e.preventDefault();\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.back = () => {\n      this.props.history.push(\"/\");\n    };\n\n    this.account = id => {\n      const _fire$auth = fire.auth(),\n            currentUser = _fire$auth.currentUser;\n\n      fire.database().ref(\"foodItem/\".concat(id, \"/\")).on(\"value\", snapshot => {\n        var obj = snapshot.val();\n        var list = [];\n        var keys = [];\n\n        for (let a in obj) {\n          list.push(obj[a]);\n          keys.push(a);\n        }\n\n        this.setState({\n          list: list,\n          keys: keys,\n          loading: false\n        }, () => this.retailerDetails(list[0].retailer));\n      });\n    };\n\n    this.edit = (item, index) => {\n      this.setState({\n        showPostItem: !this.state.showPostItem,\n        modal: index,\n        cost: item.cost\n      });\n      console.log(this.state);\n    };\n\n    this.showSetting = () => {\n      this.setState({\n        showSetting: !this.state.showSetting\n      });\n    };\n\n    this.update = (item, index) => {\n      let cartmenu = {\n        product: item.product,\n        cost: item.cost,\n        quantity: this.state.quantity,\n        metric: item.metric,\n        foodid: Object.keys(item)\n      };\n      let list = this.state.list;\n      list[index].quantity = list[index].quantity - this.state.quantity;\n      let cart = this.state.cart;\n      cart.push(cartmenu);\n      this.setState({\n        cart: cart,\n        list: list,\n        quantity: 0\n      }, () => console.log(this.state.cart));\n    };\n\n    this.retailerDetails = id => {\n      fire.database().ref(\"people/\".concat(id)).on(\"value\", snapshot => {\n        var obj = snapshot.val();\n        let retailer = {\n          name: obj.name,\n          village: obj.village,\n          contact: obj.contact\n        };\n        this.setState({\n          retailer\n        }, console.log(this.state.retailer));\n      });\n    };\n\n    this.removeCartItem = (foodid, index) => {\n      let _this$state = this.state,\n          cart = _this$state.cart,\n          list = _this$state.list;\n      let index1 = list.map((item, i) => {\n        if (Object.keys(list[i]) === foodid) return i;\n      });\n      let quantity = cart[index].quantity;\n      list[index1].quantity = parseInt(list[index1].quantity) + quantity;\n      cart.splice(index, 1);\n      this.setState({\n        cart,\n        list\n      });\n    };\n\n    this.state = {\n      key1: \"\",\n      key2: \"\",\n      loading: false,\n      quantity: 0,\n      showSetting: false,\n      showPostItem: false,\n      list: [],\n      keys: [],\n      cart: [],\n      retailer: {\n        name: \"\",\n        contact: \"\",\n        village: \"\"\n      },\n      custUid: \"\",\n      modal: 0\n    };\n    this.account = this.account.bind(this);\n    this.back = this.back.bind(this).bind(this);\n    this.retailerDetails = this.retailerDetails.bind(this);\n  }\n\n  componentWillMount() {\n    var _qs$parse = qs.parse(this.props.match.params.id),\n        id = _qs$parse.id;\n\n    var _qs$parse2 = qs.parse(this.props.match.params.id2),\n        id2 = _qs$parse2.id2;\n\n    this.account(id);\n    this.setState({\n      key1: id,\n      key2: id2,\n      loading: false\n    });\n  }\n\n  render() {\n    const listItems = this.state.list.map((item, index) => React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(Table, {\n      fixed: true,\n      stackable: true,\n      style: {\n        marginTop: \"4vh\",\n        marginBottom: \"0vh\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(Table.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(Table.Row, {\n      style: {\n        background: \"lightcoral\",\n        color: \"black\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(Table.Cell, {\n      width: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, item.product)), React.createElement(Table.Cell, {\n      width: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"Quantity : \", item.quantity)), React.createElement(Table.Cell, {\n      width: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \" Cost per \", item.metric, \" :Rs. \", item.cost)), React.createElement(Table.Cell, {\n      textAlign: \"center\",\n      width: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, this.state.showSetting ? React.createElement(Button, {\n      size: \"small\",\n      color: this.state.showPostItem ? \"white\" : \"yellow\",\n      onClick: () => this.edit(item, index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(Button.Content, {\n      visible: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"pencil\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }), this.state.showPostItem ? \"DISABL BUY EDIT\" : \"ENABLE BUY MODE\")) : null)))), React.createElement(Transition, {\n      visible: this.state.showPostItem && this.state.modal === index,\n      animation: \"vertical flip\",\n      duration: 400,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(Form, {\n      style: {\n        paddingBottom: \"8vh\",\n        paddingTop: \"2vh\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      fluid: true,\n      onChange: this.handleChange,\n      name: \"quantity\",\n      label: \"Quantity\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    })), React.createElement(Button, {\n      as: \"div\",\n      compact: true,\n      labelPosition: \"left\",\n      size: \"large\",\n      onClick: () => this.update(item, index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(Label, {\n      as: \"span\",\n      color: \"black\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, \"Add To Cart\"), React.createElement(Button, {\n      color: \"yellow\",\n      icon: true,\n      compact: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"shop\",\n      color: \"black\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    })))))));\n    const cartlist = this.state.cart.map((item, index) => React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, React.createElement(Table, {\n      fixed: true,\n      stackable: true,\n      style: {\n        marginTop: \"4vh\",\n        marginBottom: \"0vh\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(Table.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(Table.Row, {\n      style: {\n        background: \"lightcoral\",\n        color: \"black\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(Table.Cell, {\n      width: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, item.product)), React.createElement(Table.Cell, {\n      width: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, \"Quantity : \", item.quantity)), React.createElement(Table.Cell, {\n      width: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, \" Cost per \", item.metric, \" :Rs. \", item.cost)), React.createElement(Table.Cell, {\n      textAlign: \"center\",\n      width: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, React.createElement(Button, {\n      size: \"small\",\n      color: this.state.showPostItem ? \"white\" : \"yellow\",\n      onClick: () => this.removeCartItem(item.foodid, index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(Button.Content, {\n      visible: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"remove\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }), \"Remove\"))))))));\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, this.state.loading ? React.createElement(Loader, {\n      style: {\n        marginTop: \"5%\"\n      },\n      active: true,\n      inline: \"centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }) : null, React.createElement(Grid, {\n      style: {\n        marginTop: \"0vh\",\n        minHeight: \"100vh\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      id: \"headerContainer\",\n      style: {\n        backgroundColor: \"#123445\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"green\",\n      size: \"compact\",\n      fluid: true,\n      onClick: () => this.showSetting(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, React.createElement(Button.Content, {\n      visible: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, this.state.showSetting ? \"DISABLE BUY ITEMS MODE\" : \"BUY ITEMS MODE\")), this.state.showSetting ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, listItems, \" \", React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, \"Cart Menu\"), cartlist) : null, React.createElement(Button, {\n      positive: true,\n      onClick: this.back,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, \" Back\"))));\n  }\n\n}\n\nexport default Welcome;","map":{"version":3,"sources":["/home/aman208/Desktop/Projects/hackathon/Client/src/FoodList/buynowVillage.js"],"names":["React","Component","moment","fire","Button","Container","Card","Header","Image","Grid","Loader","Icon","Dimmer","Table","Transition","Label","Form","Comment","GridColumn","Divider","qs","require","Welcome","constructor","props","handleChange","e","preventDefault","setState","target","name","value","back","history","push","account","id","auth","currentUser","database","ref","on","snapshot","obj","val","list","keys","a","loading","retailerDetails","retailer","edit","item","index","showPostItem","state","modal","cost","console","log","showSetting","update","cartmenu","product","quantity","metric","foodid","Object","cart","village","contact","removeCartItem","index1","map","i","parseInt","splice","key1","key2","custUid","bind","componentWillMount","parse","match","params","id2","render","listItems","marginTop","marginBottom","background","color","paddingBottom","paddingTop","cartlist","minHeight","backgroundColor"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AAEA,SACEC,MADF,EAEEC,SAFF,EAGEC,IAHF,EAIEC,MAJF,EAKEC,KALF,EAMEC,IANF,EAOEC,MAPF,EAQEC,IARF,EASEC,MATF,EAUEC,KAVF,EAWEC,UAXF,EAWeC,KAXf,EAYEC,IAZF,EAaEC,OAbF,EAcEC,UAdF,EAeEC,OAfF,QAgBO,mBAhBP;;AAuBA,IAAIC,EAAE,GAAGC,OAAO,CAAC,gBAAD,CAAhB;;AAKA,MAAMC,OAAN,SAAsBrB,SAAtB,CAAgC;AAE5BsB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAgCjBC,YAhCiB,GAgCDC,CAAD,IAAO;AACpBA,MAAAA,CAAC,CAACC,cAAF;AACA,WAAKC,QAAL,CAAc;AAAC,SAACF,CAAC,CAACG,MAAF,CAASC,IAAV,GAAiBJ,CAAC,CAACG,MAAF,CAASE;AAA3B,OAAd;AACD,KAnCgB;;AAAA,SAwCnBC,IAxCmB,GAwCZ,MACP;AAAE,WAAKR,KAAL,CAAWS,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD,KA1CkB;;AAAA,SA4CnBC,OA5CmB,GA4CRC,EAAD,IAAQ;AAAA,yBACQjC,IAAI,CAACkC,IAAL,EADR;AAAA,YACRC,WADQ,cACRA,WADQ;;AAEhBnC,MAAAA,IAAI,CACDoC,QADH,GAEGC,GAFH,oBAEmBJ,EAFnB,QAGGK,EAHH,CAGM,OAHN,EAGeC,QAAQ,IAAI;AACvB,YAAIC,GAAG,GAAGD,QAAQ,CAACE,GAAT,EAAV;AACA,YAAIC,IAAI,GAAG,EAAX;AACA,YAAIC,IAAI,GAAG,EAAX;;AACA,aAAK,IAAIC,CAAT,IAAcJ,GAAd,EAAmB;AACjBE,UAAAA,IAAI,CAACX,IAAL,CAAUS,GAAG,CAACI,CAAD,CAAb;AACAD,UAAAA,IAAI,CAACZ,IAAL,CAAUa,CAAV;AACD;;AAED,aAAKnB,QAAL,CAAc;AACZiB,UAAAA,IAAI,EAAEA,IADM;AAEZC,UAAAA,IAAI,EAAEA,IAFM;AAGZE,UAAAA,OAAO,EAAE;AAHG,SAAd,EAKI,MAAM,KAAKC,eAAL,CAAsBJ,IAAI,CAAC,CAAD,CAAJ,CAAQK,QAA9B,CALV;AAMD,OAlBH;AAmBD,KAjEkB;;AAAA,SAmEnBC,IAnEmB,GAmEZ,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAEtB,WAAKzB,QAAL,CAAc;AAAE0B,QAAAA,YAAY,EAAE,CAAC,KAAKC,KAAL,CAAWD,YAA5B;AAA2CE,QAAAA,KAAK,EAAGH,KAAnD;AACXI,QAAAA,IAAI,EAAEL,IAAI,CAACK;AADA,OAAd;AAIEC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKJ,KAAjB;AACH,KA1EkB;;AAAA,SA4EnBK,WA5EmB,GA4EL,MAAK;AACf,WAAKhC,QAAL,CAAc;AAACgC,QAAAA,WAAW,EAAE,CAAC,KAAKL,KAAL,CAAWK;AAA1B,OAAd;AACH,KA9EkB;;AAAA,SAgFnBC,MAhFmB,GAgFX,CAACT,IAAD,EAAQC,KAAR,KAAiB;AAEtB,UAAIS,QAAQ,GAAI;AAAEC,QAAAA,OAAO,EAAGX,IAAI,CAACW,OAAjB;AACfN,QAAAA,IAAI,EAAGL,IAAI,CAACK,IADG;AACIO,QAAAA,QAAQ,EAAG,KAAKT,KAAL,CAAWS,QAD1B;AAEZC,QAAAA,MAAM,EAAGb,IAAI,CAACa,MAFF;AAEYC,QAAAA,MAAM,EAAEC,MAAM,CAACrB,IAAP,CAAYM,IAAZ;AAFpB,OAAhB;AAIA,UAAKP,IAAI,GAAG,KAAKU,KAAL,CAAWV,IAAvB;AAEAA,MAAAA,IAAI,CAACQ,KAAD,CAAJ,CAAYW,QAAZ,GAAuBnB,IAAI,CAACQ,KAAD,CAAJ,CAAYW,QAAZ,GAAuB,KAAKT,KAAL,CAAWS,QAAzD;AAIC,UAAII,IAAI,GAAG,KAAKb,KAAL,CAAWa,IAAtB;AAEAA,MAAAA,IAAI,CAAClC,IAAL,CAAU4B,QAAV;AAEA,WAAKlC,QAAL,CAAc;AAACwC,QAAAA,IAAI,EAACA,IAAN;AAAevB,QAAAA,IAAI,EAAGA,IAAtB;AAA6BmB,QAAAA,QAAQ,EAAG;AAAxC,OAAd,EAA4D,MAAMN,OAAO,CAACC,GAAR,CAAY,KAAKJ,KAAL,CAAWa,IAAvB,CAAlE;AAIH,KApGkB;;AAAA,SAuGnBnB,eAvGmB,GAuGAb,EAAD,IAAS;AAEvBjC,MAAAA,IAAI,CACHoC,QADD,GAECC,GAFD,kBAEeJ,EAFf,GAGCK,EAHD,CAGI,OAHJ,EAGaC,QAAQ,IAAI;AACvB,YAAIC,GAAG,GAAGD,QAAQ,CAACE,GAAT,EAAV;AACC,YAAIM,QAAQ,GAAG;AAAEpB,UAAAA,IAAI,EAAGa,GAAG,CAACb,IAAb;AACbuC,UAAAA,OAAO,EAAG1B,GAAG,CAAC0B,OADD;AAEdC,UAAAA,OAAO,EAAG3B,GAAG,CAAC2B;AAFA,SAAf;AAGD,aAAK1C,QAAL,CAAc;AAACsB,UAAAA;AAAD,SAAd,EAA4BQ,OAAO,CAACC,GAAR,CAAY,KAAKJ,KAAL,CAAWL,QAAvB,CAA5B;AACD,OATD;AAYH,KArHkB;;AAAA,SAuHnBqB,cAvHmB,GAuHF,CAACL,MAAD,EAAUb,KAAV,KAAoB;AAAA,wBAEf,KAAKE,KAFU;AAAA,UAE7Ba,IAF6B,eAE7BA,IAF6B;AAAA,UAEvBvB,IAFuB,eAEvBA,IAFuB;AAInC,UAAI2B,MAAM,GAAG3B,IAAI,CAAC4B,GAAL,CAAS,CAAErB,IAAF,EAAQsB,CAAR,KAAc;AAClC,YAAIP,MAAM,CAACrB,IAAP,CAAYD,IAAI,CAAC6B,CAAD,CAAhB,MAAyBR,MAA7B,EACE,OAAOQ,CAAP;AACH,OAHY,CAAb;AAMA,UAAIV,QAAQ,GAAII,IAAI,CAACf,KAAD,CAAJ,CAAYW,QAA5B;AAEAnB,MAAAA,IAAI,CAAC2B,MAAD,CAAJ,CAAaR,QAAb,GAAwBW,QAAQ,CAAC9B,IAAI,CAAC2B,MAAD,CAAJ,CAAaR,QAAd,CAAR,GAAkCA,QAA1D;AAEAI,MAAAA,IAAI,CAACQ,MAAL,CAAYvB,KAAZ,EAAmB,CAAnB;AACE,WAAKzB,QAAL,CAAc;AAACwC,QAAAA,IAAD;AAAQvB,QAAAA;AAAR,OAAd;AACH,KAvIkB;;AAEf,SAAKU,KAAL,GAAa;AAAEsB,MAAAA,IAAI,EAAC,EAAP;AAAYC,MAAAA,IAAI,EAAC,EAAjB;AAAuB9B,MAAAA,OAAO,EAAE,KAAhC;AACbgB,MAAAA,QAAQ,EAAC,CADI;AAGbJ,MAAAA,WAAW,EAAI,KAHF;AAKbN,MAAAA,YAAY,EAAE,KALD;AAMbT,MAAAA,IAAI,EAAE,EANO;AAObC,MAAAA,IAAI,EAAC,EAPQ;AAQbsB,MAAAA,IAAI,EAAC,EARQ;AAUblB,MAAAA,QAAQ,EAAC;AACPpB,QAAAA,IAAI,EAAC,EADE;AAEPwC,QAAAA,OAAO,EAAG,EAFH;AAGPD,QAAAA,OAAO,EAAE;AAHF,OAVI;AAgBbU,MAAAA,OAAO,EAAC,EAhBK;AAiBbvB,MAAAA,KAAK,EAAE;AAjBM,KAAb;AAsBH,SAAKrB,OAAL,GAAc,KAAKA,OAAL,CAAa6C,IAAb,CAAkB,IAAlB,CAAd;AACA,SAAKhD,IAAL,GAAY,KAAKA,IAAL,CAAUgD,IAAV,CAAe,IAAf,EAAqBA,IAArB,CAA0B,IAA1B,CAAZ;AACA,SAAK/B,eAAL,GAAuB,KAAKA,eAAL,CAAqB+B,IAArB,CAA0B,IAA1B,CAAvB;AAGE;;AA+GJC,EAAAA,kBAAkB,GAAG;AAAA,oBAGT7D,EAAE,CAAC8D,KAAH,CAAS,KAAK1D,KAAL,CAAW2D,KAAX,CAAiBC,MAAjB,CAAwBhD,EAAjC,CAHS;AAAA,QAGfA,EAHe,aAGfA,EAHe;;AAAA,qBAIRhB,EAAE,CAAC8D,KAAH,CAAS,KAAK1D,KAAL,CAAW2D,KAAX,CAAiBC,MAAjB,CAAwBC,GAAjC,CAJQ;AAAA,QAIfA,GAJe,cAIfA,GAJe;;AAKpB,SAAKlD,OAAL,CAAaC,EAAb;AACA,SAAKR,QAAL,CAAc;AAAEiD,MAAAA,IAAI,EAAEzC,EAAR;AAAa0C,MAAAA,IAAI,EAAEO,GAAnB;AAAyBrC,MAAAA,OAAO,EAAE;AAAlC,KAAd;AAGA;;AAIAsC,EAAAA,MAAM,GAAG;AAEP,UAAMC,SAAS,GAAG,KAAKhC,KAAL,CAAWV,IAAX,CAAgB4B,GAAhB,CAAoB,CAACrB,IAAD,EAAOC,KAAP,KACpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,SAAS,MAAtB;AACE,MAAA,KAAK,EAAE;AAAEmC,QAAAA,SAAS,EAAE,KAAb;AAAoBC,QAAAA,YAAY,EAAE;AAAlC,OADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGE,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,oBAAC,KAAD,CAAO,GAAP;AAAW,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAC,YAAZ;AAA2BC,QAAAA,KAAK,EAAC;AAAjC,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,oBAAC,KAAD,CAAO,IAAP;AAAY,MAAA,KAAK,EAAE,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKvC,IAAI,CAACW,OAAV,CADD,CADD,EAKC,oBAAC,KAAD,CAAO,IAAP;AAAY,MAAA,KAAK,EAAE,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAgBX,IAAI,CAACY,QAArB,CADF,CALD,EAQC,oBAAC,KAAD,CAAO,IAAP;AAAY,MAAA,KAAK,EAAE,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAeZ,IAAI,CAACa,MAApB,YAAkCb,IAAI,CAACK,IAAvC,CADF,CARD,EAaC,oBAAC,KAAD,CAAO,IAAP;AAAY,MAAA,SAAS,EAAC,QAAtB;AAA+B,MAAA,KAAK,EAAE,CAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGG,KAAKF,KAAL,CAAWK,WAAX,GACE,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,OAAb;AAAoB,MAAA,KAAK,EAAE,KAAKL,KAAL,CAAWD,YAAX,GAA0B,OAA1B,GAAoC,QAA/D;AACC,MAAA,OAAO,EAAE,MAAM,KAAKH,IAAL,CAAUC,IAAV,EAAgBC,KAAhB,CADhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAED,oBAAC,MAAD,CAAQ,OAAR;AAAgB,MAAA,OAAO,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,IAAD;AAAM,MAAA,IAAI,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,EAEK,KAAKE,KAAL,CAAWD,YAAX,GACG,iBADH,GAEG,iBAJR,CAFC,CADF,GASW,IAZd,CAbD,CADD,CAHF,CADF,EAqCE,oBAAC,UAAD;AACR,MAAA,OAAO,EAAE,KAAKC,KAAL,CAAWD,YAAX,IAA2B,KAAKC,KAAL,CAAWC,KAAX,KAAqBH,KADjD;AAER,MAAA,SAAS,EAAC,eAFF;AAGR,MAAA,QAAQ,EAAE,GAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKR,oBAAC,IAAD;AACE,MAAA,KAAK,EAAE;AACLuC,QAAAA,aAAa,EAAE,KADV;AAELC,QAAAA,UAAU,EAAE;AAFP,OADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAME,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,MAAM,EAAC,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,oBAAC,IAAD,CAAM,KAAN;AACE,MAAA,KAAK,MADP;AAEE,MAAA,QAAQ,EAAE,KAAKpE,YAFjB;AAGE,MAAA,IAAI,EAAC,UAHP;AAIE,MAAA,KAAK,EAAE,UAJT;AAKE,MAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CANF,EAiBE,oBAAC,MAAD;AAAQ,MAAA,EAAE,EAAC,KAAX;AAAiB,MAAA,OAAO,MAAxB;AACE,MAAA,aAAa,EAAC,MADhB;AAEE,MAAA,IAAI,EAAC,OAFP;AAGG,MAAA,OAAO,EAAE,MAAM,KAAKoC,MAAL,CAAYT,IAAZ,EAAmBC,KAAnB,CAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKE,oBAAC,KAAD;AAAO,MAAA,EAAE,EAAC,MAAV;AAAiB,MAAA,KAAK,EAAC,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBALF,EAQE,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,QAAd;AAAuB,MAAA,IAAI,MAA3B;AAA4B,MAAA,OAAO,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,IAAI,EAAC,MAAX;AAAkB,MAAA,KAAK,EAAC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CARF,CAjBF,CALQ,CArCF,CADgB,CAAlB;AAkFA,UAAMyC,QAAQ,GAAG,KAAKvC,KAAL,CAAWa,IAAX,CAAgBK,GAAhB,CAAoB,CAACrB,IAAD,EAAOC,KAAP,KACnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,SAAS,MAAtB;AACE,MAAA,KAAK,EAAE;AAAEmC,QAAAA,SAAS,EAAE,KAAb;AAAoBC,QAAAA,YAAY,EAAE;AAAlC,OADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGE,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,oBAAC,KAAD,CAAO,GAAP;AAAW,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAC,YAAZ;AAA2BC,QAAAA,KAAK,EAAC;AAAjC,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,oBAAC,KAAD,CAAO,IAAP;AAAY,MAAA,KAAK,EAAE,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKvC,IAAI,CAACW,OAAV,CADD,CADD,EAKC,oBAAC,KAAD,CAAO,IAAP;AAAY,MAAA,KAAK,EAAE,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAgBX,IAAI,CAACY,QAArB,CADF,CALD,EAQC,oBAAC,KAAD,CAAO,IAAP;AAAY,MAAA,KAAK,EAAE,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAeZ,IAAI,CAACa,MAApB,YAAkCb,IAAI,CAACK,IAAvC,CADF,CARD,EAaC,oBAAC,KAAD,CAAO,IAAP;AAAY,MAAA,SAAS,EAAC,QAAtB;AAA+B,MAAA,KAAK,EAAE,CAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEK,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,OAAb;AAAoB,MAAA,KAAK,EAAE,KAAKF,KAAL,CAAWD,YAAX,GAA0B,OAA1B,GAAoC,QAA/D;AACC,MAAA,OAAO,EAAE,MAAM,KAAKiB,cAAL,CAAoBnB,IAAI,CAACc,MAAzB,EAAkCb,KAAlC,CADhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAED,oBAAC,MAAD,CAAQ,OAAR;AAAgB,MAAA,OAAO,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,IAAD;AAAM,MAAA,IAAI,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,WAFC,CAFL,CAbD,CADD,CAHF,CAFF,CADe,CAAjB;AAwCC,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEN,KAAKE,KAAL,CAAWP,OAAX,GACA,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAE;AAAEwC,QAAAA,SAAS,EAAE;AAAb,OAAf;AAAoC,MAAA,MAAM,MAA1C;AAA2C,MAAA,MAAM,EAAC,UAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,GAEE,IAJI,EAMP,oBAAC,IAAD;AAAO,MAAA,KAAK,EAAE;AAAEA,QAAAA,SAAS,EAAE,KAAb;AAAoBO,QAAAA,SAAS,EAAE;AAA/B,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,MAAN;AAAa,MAAA,EAAE,EAAC,iBAAhB;AAAoC,MAAA,KAAK,EAAE;AAAEC,QAAAA,eAAe,EAAE;AAAnB,OAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,oBAAC,MAAD;AACQ,MAAA,KAAK,EAAC,OADd;AAEQ,MAAA,IAAI,EAAC,SAFb;AAEuB,MAAA,KAAK,MAF5B;AAGQ,MAAA,OAAO,EAAE,MAAM,KAAKpC,WAAL,EAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKQ,oBAAC,MAAD,CAAQ,OAAR;AAAgB,MAAA,OAAO,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKL,KAAL,CAAWK,WAAX,GACG,wBADH,GAC6B,gBAFhC,CALR,CADD,EAYE,KAAKL,KAAL,CAAWK,WAAX,GAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAM2B,SAAN,OAAiB,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAjB,EAC1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAD0B,EAExBO,QAFwB,CAAzB,GAEmB,IAdrB,EAiBH,oBAAC,MAAD;AAAQ,MAAA,QAAQ,MAAhB;AAAiB,MAAA,OAAO,EAAE,KAAK9D,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAjBG,CADF,CANO,CAAP;AA6BF;;AApT2B;;AAuT9B,eAAeV,OAAf","sourcesContent":["import React ,{Component} from 'react'\nimport moment from \"moment\";\nimport fire from '../firebase'\n\nimport {\n  Button,\n  Container,\n  Card,\n  Header,\n  Image,\n  Grid,\n  Loader,\n  Icon,\n  Dimmer,\n  Table ,\n  Transition , Label,\n  Form ,\n  Comment,\n  GridColumn,\n  Divider\n} from \"semantic-ui-react\";\n\n\n\n\n\n\nvar qs = require('querystringify');\n\n\n\n\nclass Welcome extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { key1:\"\" , key2:\"\" ,  loading :false,\n        quantity:0,\n        \n        showSetting :  false ,\n        \n        showPostItem: false,\n        list: [],\n        keys:[],\n        cart:[] ,\n\n        retailer:{\n          name:\"\" ,\n          contact : \"\",\n          village: \"\"\n        } ,\n\n        custUid:\"\" ,\n        modal: 0\n\n       \n    \n    };\n     this.account= this.account.bind(this);\n     this.back = this.back.bind(this).bind(this);\n     this.retailerDetails = this.retailerDetails.bind(this);\n     \n    \n      }\n\n\n      handleChange = (e) => {\n        e.preventDefault();\n        this.setState({[e.target.name]: e.target.value}  );\n      }\n\n     \n\n\n    back = () =>\n    { this.props.history.push(\"/\");\n    }\n\n    account = (id) => {\n      const { currentUser } = fire.auth();\n      fire\n        .database()\n        .ref(`foodItem/${id}/`)\n        .on(\"value\", snapshot => {\n          var obj = snapshot.val();\n          var list = [];\n          var keys = [];\n          for (let a in obj) {\n            list.push(obj[a]);\n            keys.push(a);\n          }\n          \n          this.setState({\n            list: list,\n            keys: keys,\n            loading: false ,\n           \n          } , () => this.retailerDetails( list[0].retailer));\n        });\n    };\n\n    edit = (item, index) => {\n      \n      this.setState({ showPostItem: !this.state.showPostItem , modal : index ,\n         cost :item.cost ,\n       });\n\n        console.log(this.state)\n    };\n\n    showSetting = () =>{\n        this.setState({showSetting: !this.state.showSetting});\n    }\n\n    update =(item , index) =>{\n\n       let cartmenu  = { product : item.product ,\n        cost : item.cost , quantity : this.state.quantity ,\n           metric : item.metric  , foodid: Object.keys(item) }\n\n       let  list = this.state.list;\n       \n       list[index].quantity = list[index].quantity - this.state.quantity; \n       \n\n        \n        let cart = this.state.cart;\n        \n        cart.push(cartmenu);\n\n        this.setState({cart:cart   , list : list , quantity : 0 } , () => console.log(this.state.cart));\n           \n           \n\n    } \n\n\n    retailerDetails = (id ) => {\n     \n        fire\n        .database()\n        .ref(`people/${id}`)\n        .on(\"value\", snapshot => {\n          var obj = snapshot.val();\n           let retailer = { name : obj.name ,\n             village : obj.village ,\n            contact : obj.contact }\n          this.setState({retailer } , console.log(this.state.retailer));\n        } )\n\n\n    }\n\n    removeCartItem = (foodid , index) => {\n  \n      let { cart ,list} = this.state;\n\n      let index1 = list.map(( item ,i) => {\n        if( Object.keys(list[i]) === foodid)\n          return i;\n      }\n      ) ;\n\n      let quantity =  cart[index].quantity ;\n      \n      list[index1].quantity = parseInt(list[index1].quantity) + quantity;\n\n      cart.splice(index ,1);\n        this.setState({cart , list});\n    }\n\n   \n   \n      \n   componentWillMount (){\n\n\n    var {id} = qs.parse(this.props.match.params.id); \n    var {id2} = qs.parse(this.props.match.params.id2); \n    this.account(id);    \n    this.setState({ key1: id , key2: id2  ,loading :false});\n\n\n   }\n\n\n\n    render() {\n\n      const listItems = this.state.list.map((item, index) => (\n        <div>\n          <Table fixed stackable\n            style={{ marginTop: \"4vh\", marginBottom: \"0vh\" }}\n          >\n            <Table.Body>\n             <Table.Row style={{background:\"lightcoral\" , color:\"black\"  }}>\n              <Table.Cell width={4} >\n               <h2>{item.product}</h2>\n              </Table.Cell>\n  \n              <Table.Cell width={3}>\n                <h2>Quantity : {item.quantity}</h2>\n              </Table.Cell>\n              <Table.Cell width={4}>\n                <h3> Cost per {item.metric} :Rs. {item.cost}</h3>\n              </Table.Cell>\n             \n  \n              <Table.Cell textAlign=\"center\" width={3}>\n              \n  \n                {this.state.showSetting ?\n                   <Button size=\"small\"color={this.state.showPostItem ? \"white\" : \"yellow\"}\n                    onClick={() => this.edit(item ,index)}>\n                  <Button.Content visible>\n                  <Icon name='pencil' />\n                      {this.state.showPostItem\n                        ? \"DISABL BUY EDIT\"\n                        : \"ENABLE BUY MODE\"}\n                    </Button.Content>\n                </Button> : null }\n  \n              </Table.Cell>\n              </Table.Row>\n            </Table.Body>\n          </Table>\n  \n          <Transition\n  visible={this.state.showPostItem && this.state.modal === index}\n  animation=\"vertical flip\"\n  duration={400}\n  >\n  <Form\n    style={{\n      paddingBottom: \"8vh\",\n      paddingTop: \"2vh\"\n    }}\n  >\n    <Form.Group widths=\"equal\">\n     \n      <Form.Input\n        fluid\n        onChange={this.handleChange}\n        name=\"quantity\"\n        label =\"Quantity\"\n        required\n      />\n    </Form.Group>\n   \n    <Button as=\"div\" compact\n      labelPosition=\"left\"\n      size=\"large\"\n       onClick={() => this.update(item , index)}\n    >\n      <Label as=\"span\" color=\"black\">\n        Add To Cart\n      </Label>\n      <Button color=\"yellow\" icon compact>\n        <Icon name=\"shop\" color=\"black\" />\n      </Button>\n    </Button>\n  </Form>\n  </Transition>\n        \n       \n        </div>\n      ));\n\n\n      \n\n      const cartlist = this.state.cart.map((item, index) => (\n        <div>\n          \n          <Table fixed stackable\n            style={{ marginTop: \"4vh\", marginBottom: \"0vh\" }}\n          >\n            <Table.Body>\n             <Table.Row style={{background:\"lightcoral\" , color:\"black\"  }}>\n              <Table.Cell width={4} >\n               <h2>{item.product}</h2>\n              </Table.Cell>\n  \n              <Table.Cell width={3}>\n                <h2>Quantity : {item.quantity}</h2>\n              </Table.Cell>\n              <Table.Cell width={4}>\n                <h3> Cost per {item.metric} :Rs. {item.cost}</h3>\n              </Table.Cell>\n             \n  \n              <Table.Cell textAlign=\"center\" width={3}>\n                \n                   <Button size=\"small\"color={this.state.showPostItem ? \"white\" : \"yellow\"}\n                    onClick={() => this.removeCartItem(item.foodid , index)}>\n                  <Button.Content visible>\n                  <Icon name='remove' />\n                    Remove\n                    </Button.Content>\n                </Button> \n  \n              </Table.Cell>\n              </Table.Row>\n            </Table.Body>\n          </Table>\n          </div>\n      ));\n\n      \n      \n\n       return <div>\n\n       {this.state.loading ? (\n        <Loader style={{ marginTop: \"5%\" }} active inline=\"centered\" />\n      ) : null}\n       \n       <Grid  style={{ marginTop: \"0vh\", minHeight: \"100vh\"  }}>\n         <Grid.Column id=\"headerContainer\"   style={{ backgroundColor: \"#123445\" }}>\n          <Button\n                  color=\"green\"\n                  size=\"compact\" fluid\n                  onClick={() => this.showSetting()}\n                >\n                  <Button.Content visible>\n                    {this.state.showSetting\n                      ? \"DISABLE BUY ITEMS MODE\": \"BUY ITEMS MODE\"\n                      }\n                  </Button.Content>\n                </Button>\n          {this.state.showSetting ? <div>{listItems} <Divider/> \n          <h1>Cart Menu</h1>\n           {cartlist}</div> : null}\n           \n    \n      <Button positive onClick={this.back} > Back</Button>\n      </Grid.Column>\n      </Grid>\n      </div>\n \n    }\n  }\n\n  export default Welcome;\n\n"]},"metadata":{},"sourceType":"module"}
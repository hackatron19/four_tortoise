{"ast":null,"code":"var _jsxFileName = \"/home/aman208/Desktop/Projects/hackathon/Client/src/Account/Customer/Request.js\";\nimport { Button, Form, Header, Input, Icon, Loader, Divider, Label, Dropdown, Transition, TextArea } from \"semantic-ui-react\";\nimport { Route, BrowserRouter as Router, Switch } from 'react-router-dom';\nimport React, { Component } from \"react\";\nimport fire from \"../../firebase\";\nconst options = [{\n  key: 'kg',\n  text: 'Kilogram',\n  value: 'kg'\n}, {\n  key: 'l',\n  text: 'Litres',\n  value: 'l'\n}, {\n  key: 'num',\n  text: 'Count',\n  value: 'num'\n}];\n\nclass RequestByCustomer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.edit = index => {\n      this.setState({\n        showEdit: !this.state.showEdit\n      });\n    };\n\n    this.state = {\n      loading: false,\n      showEdit: false,\n      fields: [],\n      loading: false\n    };\n    this.onClickButtonAdder = this.onClickButtonAdder.bind(this);\n    this.onClickButtonSubmit = this.onClickButtonSubmit.bind(this);\n  }\n\n  onClickButtonAdder(event) {\n    event.preventDefault();\n    this.setState({\n      fields: [{\n        product: \"\",\n        quantity: \"\",\n        type: \"\",\n        cost: 0\n      }, ...this.state.fields]\n    });\n  }\n\n  onClickFormGroupButton(index) {\n    let fields = [...this.state.fields];\n    fields.splice(index, 1);\n    this.setState({\n      fields\n    });\n  }\n\n  onChangeFormGroupInput(index, e) {\n    e.preventDefault();\n    let f = [...this.state.fields];\n    f[index][e.target.name] = e.target.value;\n    this.setState({\n      fields: f\n    }, () => {\n      console.log(this.state.fields);\n    });\n  }\n\n  onChangeDropDown(index, e) {\n    e.preventDefault();\n    let f = [...this.state.fields];\n    f[index].type = options[index].value;\n    this.setState({\n      fields: f\n    }, () => {\n      console.log(this.state.fields);\n    });\n  }\n\n  onClickButtonSubmit(event) {\n    event.preventDefault();\n    console.log(this.state.fields);\n    this.setState({\n      loading: true\n    });\n\n    let _fire$auth = fire.auth(),\n        currentUser = _fire$auth.currentUser;\n\n    this.state.fields.map((item, index) => {\n      setInterval(fire.database().ref(\"reqByCus/\".concat(currentUser.uid, \"/\")).push({\n        product: item.product,\n        cost: item.cost,\n        quantity: item.quantity,\n        metric: item.type,\n        timestamp: Date.now(),\n        requestedtimestamp: Date.now() + 20000,\n        customer: currentUser.uid\n      }).then(() => {\n        this.setState({\n          loading: false\n        });\n      }).catch(e => {\n        alert(e);\n      }), 500);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"green\",\n      size: \"compact\",\n      fluid: true,\n      onClick: () => this.edit(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(Button.Content, {\n      visible: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, this.state.showEdit ? \"DISABLE Request Mode\" : \"REQUEST  ITEMS MODE\")), this.state.showEdit ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(Transition, {\n      visible: this.state.showEdit,\n      animation: \"fade\",\n      duration: 400,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: \"75%\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"fieldset\", {\n      id: \"buildyourform\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"legend\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Build your own form!\"), this.state.fields.map((value, index) => React.createElement(FormGroup, {\n      inputChange: this.onChangeFormGroupInput.bind(this, index),\n      dropdown: this.onChangeDropDown.bind(this, index),\n      buttonClick: this.onClickFormGroupButton.bind(this, index),\n      value: value,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }))))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(Button, {\n      primary: true,\n      onClick: this.onClickButtonAdder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \" Add More Form \"), React.createElement(Button, {\n      secondary: true,\n      onClick: this.onClickButtonSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \" Post Form \")) : null, this.state.loading ? React.createElement(Loader, {\n      style: {\n        marginTop: \"5%\"\n      },\n      active: true,\n      inline: \"centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }) : null);\n  }\n\n}\n\nfunction FormGroup(props) {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }, React.createElement(Input, {\n    type: \"text\",\n    label: \"Name\",\n    name: \"product\",\n    placeholder: \"Product\",\n    value: props.value.product,\n    onChange: props.inputChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }), React.createElement(Input, {\n    label: \"Quantity\",\n    type: \"number\",\n    name: \"quantity\",\n    placeholder: \"Quantity\",\n    value: props.value.quantity,\n    onChange: props.inputChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }), React.createElement(Input, {\n    label: \"Cost\",\n    type: \"number\",\n    name: \"cost\",\n    placeholder: \"Cost Of Products\",\n    value: props.value.cost,\n    onChange: props.inputChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245\n    },\n    __self: this\n  }), React.createElement(Dropdown, {\n    placeholder: \"Select Metric\",\n    name: \"type\",\n    onChange: props.dropdown,\n    selection: true,\n    options: options,\n    value: props.value.type,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253\n    },\n    __self: this\n  }), React.createElement(Button, {\n    negative: true,\n    size: \"large\",\n    onClick: props.buttonClick,\n    disabled: props.buttonDisabled,\n    tabIndex: \"-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"cancel\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270\n    },\n    __self: this\n  })));\n}\n\nexport default RequestByCustomer;","map":{"version":3,"sources":["/home/aman208/Desktop/Projects/hackathon/Client/src/Account/Customer/Request.js"],"names":["Button","Form","Header","Input","Icon","Loader","Divider","Label","Dropdown","Transition","TextArea","Route","BrowserRouter","Router","Switch","React","Component","fire","options","key","text","value","RequestByCustomer","constructor","props","handleChange","e","setState","target","name","edit","index","showEdit","state","loading","fields","onClickButtonAdder","bind","onClickButtonSubmit","event","preventDefault","product","quantity","type","cost","onClickFormGroupButton","splice","onChangeFormGroupInput","f","console","log","onChangeDropDown","auth","currentUser","map","item","setInterval","database","ref","uid","push","metric","timestamp","Date","now","requestedtimestamp","customer","then","catch","alert","render","width","marginLeft","marginRight","marginTop","FormGroup","inputChange","dropdown","buttonClick","buttonDisabled"],"mappings":"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","sourcesContent":["\nimport {\n    Button,\n    Form,\n    Header,\n    Input,\n    Icon,\n    Loader,\n    Divider,\n    Label,\n    Dropdown,\n    Transition,\n    TextArea\n  } from \"semantic-ui-react\";\n\n\nimport { Route,\n    \n    BrowserRouter as Router , \n    Switch} from 'react-router-dom'\n    \n  import React, { Component } from \"react\";\n  import fire from \"../../firebase\";\n\n\n\n\n  const options = [\n    { key: 'kg', text: 'Kilogram', value: 'kg' },\n    { key: 'l', text: 'Litres', value: 'l' },\n    { key: 'num', text: 'Count', value: 'num' },\n  ]\n  \n  \n\n  class RequestByCustomer extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        \n        loading: false,\n        showEdit: false,\n        fields: [ \n        ] ,\n        loading : false\n      };\n\n  this.onClickButtonAdder = this.onClickButtonAdder.bind(this);\n  this.onClickButtonSubmit = this.onClickButtonSubmit.bind(this);\n  \n\n}\n\nonClickButtonAdder(event) {\n    event.preventDefault();\n     \n    this.setState({\n      fields: [{ product: \"\" , quantity : \"\" , type :  \"\" \n       , cost : 0  } , ...this.state.fields]\n    });\n\n  }\n\n\n\n  onClickFormGroupButton(index) {\n    let fields = [...this.state.fields];\n    fields.splice(index, 1);\n    this.setState({ fields });\n  }\n\n  onChangeFormGroupInput(index, e) {\n      e.preventDefault();\n    let f = [...this.state.fields];\n    \n   \n   f[index][e.target.name]=e.target.value;\n    \n    \n    this.setState({fields:f},()=>{\n        console.log(this.state.fields)\n    });\n   \n    \n  }\n\n  onChangeDropDown(index,  e ){\n      e.preventDefault();\n      let f = [...this.state.fields];\n\n     \n\n      f[index].type = options[index].value\n\n      this.setState({fields:f},()=>{\n        console.log(this.state.fields)\n    });\n\n  }\n\n  onClickButtonSubmit(event) {\n    event.preventDefault();\n\n    console.log(this.state.fields);\n\n    this.setState({loading : true});\n\n     let {currentUser} = fire.auth();\n\n this.state.fields.map((item , index) =>{ setInterval(\n\n    fire\n    .database()\n    .ref(`reqByCus/${currentUser.uid}/`)\n    .push({\n       product : item.product ,\n       cost : item.cost ,\n       quantity : item.quantity ,\n       metric : item.type ,\n       timestamp : Date.now(),\n       requestedtimestamp : (Date.now()+20000) ,\n       customer : currentUser.uid\n    })\n    .then(() => {\n      this.setState({\n        loading: false\n      });\n    })\n    .catch((e) =>{\n        alert(e);\n    }) , 500);\n\n   })\n    \n\n  }\n    \n  \n    handleChange = e => {\n      this.setState({ [e.target.name]: e.target.value });\n     \n    };\n\n    edit = index => {\n        this.setState({ showEdit: !this.state.showEdit });\n      };\n    \n  \n  \n    \n  \n  \n    render() {\n        \n       \n    return (\n        \n               <div>\n              \n                  <Button\n                    color=\"green\"\n                    size=\"compact\" fluid\n                    onClick={() => this.edit()}\n                  >\n                    <Button.Content visible>\n                      {this.state.showEdit\n                        ?\"DISABLE Request Mode\": \"REQUEST  ITEMS MODE\"\n                        }\n                    </Button.Content>\n                  </Button>\n                 \n            \n  \n            {this.state.showEdit ?  \n            <div>\n            <Transition\n           visible={this.state.showEdit}\n            animation=\"fade\"\n            duration={400}\n          > \n\n<div style={{width:\"75%\" ,marginLeft:\"auto\" , marginRight:\"auto\" }}>\n\n<fieldset id=\"buildyourform\">\n<legend>Build your own form!</legend>\n{this.state.fields.map((value, index) => (\n      <FormGroup\n        inputChange={this.onChangeFormGroupInput.bind(this, index)}\n        dropdown={this.onChangeDropDown.bind(this,index )}\n        buttonClick={this.onClickFormGroupButton.bind(this, index)}\n        \n        value={value}\n        key={index}\n      />\n    ))}\n\n \n\n</fieldset>\n\n</div>\n</Transition>\n\n\n<br/> \n<Button primary onClick= {this.onClickButtonAdder} > Add More Form </Button>\n<Button secondary onClick= {this.onClickButtonSubmit} > Post Form </Button>\n\n</div>: null}\n\n  \n  \n\n     {this.state.loading ? (\n              <Loader style={{ marginTop: \"5%\" }} active inline=\"centered\" />\n            ) : null} \n          </div> \n        \n      );\n    }\n  }\n\n\n\n  function FormGroup(props) {\n    return (\n      <div>\n        \n        <Input\n          type=\"text\"\n          label=\"Name\"\n          name=\"product\"\n          placeholder=\"Product\"\n          value={props.value.product}\n          onChange={props.inputChange}\n        />\n         <Input\n          label=\"Quantity\"\n          type=\"number\"\n          name=\"quantity\"\n          placeholder=\"Quantity\"\n          value={props.value.quantity}\n          onChange={props.inputChange}\n        />\n        <Input\n          label=\"Cost\"\n         type=\"number\"\n         name=\"cost\"\n         placeholder=\"Cost Of Products\"\n         value={props.value.cost}\n         onChange={props.inputChange}\n       />\n            <Dropdown \n         placeholder='Select Metric'\n         name=\"type\"\n         onChange={props.dropdown}\n         selection \n         options={options} \n         value={props.value.type}\n         />\n\n           <Button\n           negative\n          size=\"large\"\n          onClick={props.buttonClick}\n          disabled={props.buttonDisabled}\n          tabIndex=\"-1\"\n\n         \n        ><Icon name=\"cancel\" /></Button>\n        \n       \n\n      </div>\n    );\n  }\n\n  \n  export default  RequestByCustomer;"]},"metadata":{},"sourceType":"module"}